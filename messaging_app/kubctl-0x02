#!/bin/bash
set -e

echo "ğŸš€ Deploying Blue version..."
kubectl apply -f blue_deployment.yaml

echo "ğŸš€ Deploying Green version..."
kubectl apply -f green_deployment.yaml

echo "ğŸ“Œ Applying Service..."
kubectl apply -f kubeservice.yaml

echo "â³ Waiting for pods to be ready..."
kubectl rollout status deployment/django-blue
kubectl rollout status deployment/django-green

echo "ğŸ” Checking logs for Blue pods..."
kubectl logs -l app=django,version=blue --tail=20

echo "ğŸ” Checking logs for Green pods..."
kubectl logs -l app=django,version=green --tail=20

echo "âœ… Blue-Green deployment set up successfully!"
